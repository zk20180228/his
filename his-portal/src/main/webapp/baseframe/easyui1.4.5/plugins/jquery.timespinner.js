!function(e){function t(e){var t=0;if("number"==typeof e.selectionStart)t=e.selectionStart;else if(e.createTextRange){var n=e.createTextRange(),i=document.selection.createRange();i.setEndPoint("StartToStart",n),t=i.text.length}return t}function n(e,t,n){if(e.setSelectionRange)e.setSelectionRange(t,n);else if(e.createTextRange){var i=e.createTextRange();i.collapse(),i.moveEnd("character",n),i.moveStart("character",t),i.select()}}function i(t){var n=e.data(t,"timespinner").options;e(t).addClass("timespinner-f").spinner(n);var i=n.formatter.call(t,n.parser.call(t,n.value));e(t).timespinner("initValue",i)}function r(n){for(var i=n.data.target,r=e.data(i,"timespinner").options,a=t(this),o=0;o<r.selections.length;o++){var p=r.selections[o];if(a>=p[0]&&a<=p[1])return void s(i,o)}}function s(t,i){var r=e.data(t,"timespinner").options;void 0!=i&&(r.highlight=i);var s=r.selections[r.highlight];if(s){var a=e(t).timespinner("textbox");n(a[0],s[0],s[1]),a.focus()}}function a(t,n){var i=e.data(t,"timespinner").options,n=i.parser.call(t,n),r=i.formatter.call(t,n);e(t).spinner("setValue",r)}function o(t,n){var i=e.data(t,"timespinner").options,r=e(t).timespinner("getValue"),a=i.selections[i.highlight],o=r.substring(0,a[0]),p=r.substring(a[0],a[1]),u=r.substring(a[1]),l=o+((parseInt(p,10)||0)+i.increment*(n?-1:1))+u;e(t).timespinner("setValue",l),s(t)}e.fn.timespinner=function(t,n){if("string"==typeof t){var r=e.fn.timespinner.methods[t];return r?r(this,n):this.spinner(t,n)}return t=t||{},this.each(function(){var n=e.data(this,"timespinner");n?e.extend(n.options,t):e.data(this,"timespinner",{options:e.extend({},e.fn.timespinner.defaults,e.fn.timespinner.parseOptions(this),t)}),i(this)})},e.fn.timespinner.methods={options:function(t){var n=t.data("spinner")?t.spinner("options"):{};return e.extend(e.data(t[0],"timespinner").options,{width:n.width,value:n.value,originalValue:n.originalValue,disabled:n.disabled,readonly:n.readonly})},setValue:function(e,t){return e.each(function(){a(this,t)})},getHours:function(t){var n=e.data(t[0],"timespinner").options,i=t.timespinner("getValue").split(n.separator);return parseInt(i[0],10)},getMinutes:function(t){var n=e.data(t[0],"timespinner").options,i=t.timespinner("getValue").split(n.separator);return parseInt(i[1],10)},getSeconds:function(t){var n=e.data(t[0],"timespinner").options,i=t.timespinner("getValue").split(n.separator);return parseInt(i[2],10)||0}},e.fn.timespinner.parseOptions=function(t){return e.extend({},e.fn.spinner.parseOptions(t),e.parser.parseOptions(t,["separator",{showSeconds:"boolean",highlight:"number"}]))},e.fn.timespinner.defaults=e.extend({},e.fn.spinner.defaults,{inputEvents:e.extend({},e.fn.spinner.defaults.inputEvents,{click:function(e){r.call(this,e)},blur:function(t){var n=e(t.data.target);n.timespinner("setValue",n.timespinner("getText"))},keydown:function(t){if(13==t.keyCode){var n=e(t.data.target);n.timespinner("setValue",n.timespinner("getText"))}}}),formatter:function(t){function n(e){return(e<10?"0":"")+e}if(!t)return"";var i=e(this).timespinner("options"),r=[n(t.getHours()),n(t.getMinutes())];return i.showSeconds&&r.push(n(t.getSeconds())),r.join(i.separator)},parser:function(t){function n(e){if(!e)return null;var t=e.split(i.separator);return new Date(1900,0,0,parseInt(t[0],10)||0,parseInt(t[1],10)||0,parseInt(t[2],10)||0)}var i=e(this).timespinner("options"),r=n(t);if(r){var s=n(i.min),a=n(i.max);s&&s>r&&(r=s),a&&a<r&&(r=a)}return r},selections:[[0,2],[3,5],[6,8]],separator:":",showSeconds:!1,highlight:0,spin:function(e){o(this,e)}})}(jQuery);